Written by Gabriel Hjort Blindell <ghb@kth.se>



===============
= HOW TO BUILD
===============

First, LLVM 3.4 needs to be installed on the machine. LLVM *must* be installed
such that it can be invoked from any location or else a necessary Haskell
package will fail to be installed. (I've tried to keep LLVM in the home
directory, but no matter which flags I set to Cabal the package will just refuse
to recognize that the correct version of LLVM is installed.)

To download and install LLVM 3.4, run the following commands:

   svn co http://llvm.org/svn/llvm-project/llvm/tags/RELEASE_34/final llvm
   cd llvm/tools
   svn co http://llvm.org/svn/llvm-project/cfe/tags/RELEASE_34/final clang
   cd ../..
   mkdir build
   cd build
   ../llvm/configure --enable-shared --enable-optimized
   make
   sudo make install

The last command installs the LLVM binaries in /usr/local.

Next you will need to install several Haskell packages using Cabal. To keep the
installation clean and avoid conflicts with other Haskell packages, 'cabal
sandbox' can be used (supported starting from version 1.18 of Cabal) as
follows. Before installing the packages, run (from the directory where the
README is located):

$ cabal sandbox init (first time only)

$ cabal exec bash (creates a new environment where ghc and all the other Haskell
tools are also sandboxed)

The packages to be installed are:

 - aeson
 - atto-lisp
 - cmdargs
 - graphviz
 - llvm-general-3.4.4.2   (Take note of the explicit version!)
 - safe
 - shelly
 - split

To install a Haskell package with Cabal, run the following commands:

   sudo cabal install <package>

Now you will need to build the toolchain, which is done by running the following
commands from the folder where this file is located:

   make

You also need to install MiniZinc 2.0, if it is not already installed.
